import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-HXixYu0j.js";import{b as B,c as E}from"./equipment-DL548Rsd.js";import{d as A,a2 as M,M as x,F as i,c as e,G as t,E as S,a7 as R,l as s,J as c,K as I,O as N,N as T,a9 as z,t as U,a4 as V,a6 as O,a1 as J,H as L}from"./index-CtZFkp4p.js";import{s as F,_ as j,a as G}from"./status-DgKBotGj.js";import{T as K}from"./index-DgyO5ZVj.js";import{S as Q}from"./index-B_brma43.js";import{B as P}from"./TextArea-Cs30zvrZ.js";import{_ as W}from"./index-CxjYXKV3.js";import{_ as X}from"./index-CbPuKKq1.js";import{a as Z}from"./equipment-category-DXswjgf1.js";import{u as ee}from"./equipment-supplier-D-xeEh6G.js";import{F as te,_ as ae,I as oe}from"./index-BOfr_Bk3.js";import{S as ne}from"./index-KCGl6bU8.js";import{a as se,_ as pe}from"./index-C2ZNtoS0.js";import{C as le}from"./index-B2DcCLpg.js";import{P as ie}from"./PrinterOutlined-71qCptnC.js";import"./navs-CfyB2w-a.js";import"./index-CYrzOZGV.js";import"./DownOutlined-D4s7AB3s.js";import"./useRequest-bvdcAKX1.js";import"./index-Cxmr1eSz.js";import"./List-UuYAzSWU.js";import"./pickAttrs-BsI7RF8R.js";import"./eagerComputed-CVs6PNRb.js";import"./index-CoGlqIll.js";import"./Col-CK3YAQNr.js";import"./responsiveObserve-BR2lwN30.js";import"./index-BGqO3MUF.js";import"./LeftOutlined-e3FWgSxt.js";import"./index-TlC6eTBq.js";import"./index-Bov8DSqh.js";import"./index-BA3hHyBm.js";import"./index-LeozGhtr.js";import"./isPlainObject-ByKZJB2G.js";import"./isMobile-BbN7I0i_.js";import"./index-CTzm4KRz.js";const re=[{title:"ID",dataIndex:"id",key:"id"},{title:"设备名称",dataIndex:"equipmentName",key:"equipmentName"},{title:"设备编号",dataIndex:"equipmentCode",key:"equipmentCode"},{title:"型号",dataIndex:"model",key:"model"},{title:"类型",dataIndex:"equipmentCategories",key:"equipmentCategories"},{title:"供应商",dataIndex:["equipmentSupplier","supplierName"],key:"equipmentSupplier"},{title:"状态",dataIndex:"status",key:"status"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt"},{title:"更新时间",dataIndex:"updatedAt",key:"updatedAt"},{title:"操作",key:"action"}],ue={key:2},me={key:3},de=A({__name:"List",props:{loading:{type:Boolean},pageData:{}},emits:["pageChange","delete"],setup(Y,{emit:C}){const r=C,{execute:y,onFetchResponse:n}=B(),[k,q]=M.useMessage(),p=o=>{r("pageChange",o)};n(async o=>{const{code:a,message:d}=o;if(a!==0){k.error(d);return}r("delete"),k.success("删除成功")});const m=o=>{y(o)};return(o,a)=>{var v,w,b,l;const d=K,f=Q,u=P,$=X,h=W;return i(),x(N,null,[e(h,{size:"small",columns:s(re),"data-source":(v=o.pageData)==null?void 0:v.records,loading:o.loading,"row-key":"id",pagination:{current:(w=o.pageData)==null?void 0:w.current,pageSize:(b=o.pageData)==null?void 0:b.size,total:(l=o.pageData)==null?void 0:l.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:g=>`共 ${g} 条`,pageSizeOptions:["10","20","30","40"]},onChange:p},{bodyCell:t(({column:g,record:_})=>[g.key==="status"?(i(),S(d,{key:0,color:s(F)[_.status].color},{default:t(()=>[c(I(s(F)[_.status].text),1)]),_:2},1032,["color"])):g.key==="equipmentCategories"?(i(),S(f,{key:1},{default:t(()=>[(i(!0),x(N,null,T(_.equipmentCategories,D=>(i(),S(d,null,{default:t(()=>[c(I(D.categoryName),1)]),_:2},1024))),256))]),_:2},1024)):g.key==="createdAt"?(i(),x("span",ue,I(s(z)(_.createdAt).format("YYYY/MM/DD HH:mm:ss")),1)):g.key==="updatedAt"?(i(),x("span",me,I(s(z)(_.updatedAt).format("YYYY/MM/DD HH:mm:ss")),1)):g.key==="action"?(i(),x(N,{key:4},[e(u,{type:"link",onClick:D=>o.$router.push(`/equipment/update/${_.id}`)},{default:t(()=>a[0]||(a[0]=[c("编辑")])),_:2,__:[0]},1032,["onClick"]),e($,{title:"确认要删除该设备吗?","ok-text":"Yes","cancel-text":"No",onConfirm:D=>m(_.id)},{default:t(()=>[e(u,{type:"link",danger:""},{default:t(()=>a[1]||(a[1]=[c("删除")])),_:1,__:[1]})]),_:2},1032,["onConfirm"]),e(u,{type:"link",onClick:D=>o.$router.push(`/equipment/detail/${_.id}`)},{default:t(()=>a[2]||(a[2]=[c("查看更多")])),_:2,__:[2]},1032,["onClick"])],64)):R("",!0)]),_:1},8,["columns","data-source","loading","pagination"]),e(s(q))],64)}}}),_e=A({__name:"Search",emits:["submit","reset"],setup(Y,{emit:C}){const r=C,y=U(null),n=V({kw:"",status:[],equipmentSuppliers:[],equipmentCategoryIdPaths:[]}),{data:k}=Z(),{data:q}=ee(),p=o=>{r("submit",O(o))},m=()=>{y.value.resetFields(),r("reset")};return(o,a)=>{const d=oe,f=ae,u=se,$=j,h=ne,v=pe,w=P,b=te;return i(),S(b,{ref_key:"formRef",ref:y,model:n,autocomplete:"off",onFinish:p},{default:t(()=>[e(v,{gutter:24},{default:t(()=>[e(u,{span:6},{default:t(()=>[e(f,{name:"kw",label:"关键词"},{default:t(()=>[e(d,{value:n.kw,"onUpdate:value":a[0]||(a[0]=l=>n.kw=l),placeholder:"请输入设备名称/设备编号","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(f,{name:"equipmentCategoryIdPaths",label:"设备类型"},{default:t(()=>[e($,{value:n.equipmentCategoryIdPaths,"onUpdate:value":a[1]||(a[1]=l=>n.equipmentCategoryIdPaths=l),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择设备类型","allow-clear":"",multiple:"","tree-default-expand-all":"","field-names":{label:"categoryName",value:"idPath"},"tree-data":s(k),"tree-node-filter-prop":"categoryName"},null,8,["value","tree-data"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(f,{name:"equipmentSuppliers",label:"供应商"},{default:t(()=>[e(h,{value:n.equipmentSuppliers,"onUpdate:value":a[2]||(a[2]=l=>n.equipmentSuppliers=l),mode:"tags",style:{width:"100%"},placeholder:"请选择供应商",options:s(q),"field-names":{label:"supplierName",value:"id"},"allow-clear":""},null,8,["value","options"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(f,{name:"status",label:"状态"},{default:t(()=>[e(h,{value:n.status,"onUpdate:value":a[3]||(a[3]=l=>n.status=l),mode:"tags",style:{width:"100%"},placeholder:"请选择状态",options:s(G),"allow-clear":""},null,8,["value","options"])]),_:1})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(u,{span:24,style:{"text-align":"right"}},{default:t(()=>[e(w,{type:"primary","html-type":"submit"},{default:t(()=>a[4]||(a[4]=[c("查询")])),_:1,__:[4]}),e(w,{style:{margin:"0 8px"},onClick:m},{default:t(()=>a[5]||(a[5]=[c("重置")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["model"])}}}),ce={class:"text-right"},We=A({__name:"index",setup(Y){J({title:"IE WorkSpace | 设备列表"});const{data:C,execute:r,isFetching:y}=E(),n=p=>{r({...p,current:1,size:10})},k=p=>{r({current:p.current,size:p.pageSize})},q=()=>{r()};return(p,m)=>{const o=P,a=le,d=H;return i(),S(d,null,{extra:t(()=>[L("div",ce,[e(o,{type:"primary",onClick:m[0]||(m[0]=f=>p.$router.push("/print/equipment/tag"))},{icon:t(()=>[e(s(ie))]),default:t(()=>[m[1]||(m[1]=c(" 打印标签"))]),_:1,__:[1]})])]),default:t(()=>[e(a,{class:"!mb-6"},{default:t(()=>[e(_e,{onSubmit:n})]),_:1}),e(a,null,{default:t(()=>[e(de,{loading:s(y),pageData:s(C),onPageChange:k,onDelete:q},null,8,["loading","pageData"])]),_:1})]),_:1})}}});export{We as default};
