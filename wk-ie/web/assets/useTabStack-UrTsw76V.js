import{o as I,n as $,ar as z,w as C,j as q,k as Y,ag as B,t as F,as as Q,q as U,s as X,a as A,at as w,l as Z,L as ee,Y as te}from"./index-CtZFkp4p.js";function ne(e){return q()?(Y(e),!0):!1}const re=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const oe=Object.prototype.toString,ae=e=>oe.call(e)==="[object Object]",ie=()=>{};function ue(...e){if(e.length!==1)return B(...e);const n=e[0];return typeof n=="function"?z(Q(()=>({get:n,set:ie}))):F(n)}function se(e,n){function t(...o){return new Promise((s,f)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(s).catch(f)})}return t}const L=e=>e();function le(e=L,n={}){const{initialState:t="active"}=n,o=ue(t==="active");function s(){o.value=!1}function f(){o.value=!0}const h=(...i)=>{o.value&&e(...i)};return{isActive:z(o),pause:s,resume:f,eventFilter:h}}function D(e){return Array.isArray(e)?e:[e]}function ce(e){return U()}function fe(e,n,t={}){const{eventFilter:o=L,...s}=t;return C(e,se(o,n),s)}function pe(e,n,t={}){const{eventFilter:o,initialState:s="active",...f}=t,{eventFilter:h,pause:i,resume:u,isActive:l}=le(o,{initialState:s});return{stop:fe(e,n,{...f,eventFilter:h}),pause:i,resume:u,isActive:l}}function de(e,n=!0,t){ce()?I(e,t):n?e():$(e)}function ve(e,n,t){return C(e,n,{...t,immediate:!0})}const N=re?window:void 0;function he(e){var n;const t=w(e);return(n=t==null?void 0:t.$el)!=null?n:t}function R(...e){const n=[],t=()=>{n.forEach(i=>i()),n.length=0},o=(i,u,l,v)=>(i.addEventListener(u,l,v),()=>i.removeEventListener(u,l,v)),s=A(()=>{const i=D(w(e[0])).filter(u=>u!=null);return i.every(u=>typeof u!="string")?i:void 0}),f=ve(()=>{var i,u;return[(u=(i=s.value)==null?void 0:i.map(l=>he(l)))!=null?u:[N].filter(l=>l!=null),D(w(s.value?e[1]:e[0])),D(Z(s.value?e[2]:e[1])),w(s.value?e[3]:e[2])]},([i,u,l,v])=>{if(t(),!(i!=null&&i.length)||!(u!=null&&u.length)||!(l!=null&&l.length))return;const m=ae(v)?{...v}:v;n.push(...i.flatMap(a=>u.flatMap(p=>l.map(b=>o(a,p,b,m)))))},{flush:"post"}),h=()=>{f(),t()};return ne(t),h}const E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T="__vueuse_ssr_handlers__",me=ye();function ye(){return T in E||(E[T]=E[T]||{}),E[T]}function ge(e,n){return me[e]||n}function Se(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const we={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},J="vueuse-storage";function be(e,n,t,o={}){var s;const{flush:f="pre",deep:h=!0,listenToStorageChanges:i=!0,writeDefaults:u=!0,mergeDefaults:l=!1,shallow:v,window:m=N,eventFilter:a,onError:p=r=>{console.error(r)},initOnMounted:b}=o,g=(v?X:F)(typeof n=="function"?n():n),y=A(()=>w(e));if(!t)try{t=ge("getDefaultStorage",()=>{var r;return(r=N)==null?void 0:r.localStorage})()}catch(r){p(r)}if(!t)return g;const S=w(n),W=Se(S),O=(s=o.serializer)!=null?s:we[W],{pause:V,resume:M}=pe(g,()=>x(g.value),{flush:f,deep:h,eventFilter:a});C(y,()=>k(),{flush:f});let j=!1;const K=r=>{b&&!j||k(r)},_=r=>{b&&!j||H(r)};m&&i&&(t instanceof Storage?R(m,"storage",K,{passive:!0}):R(m,J,_)),b?de(()=>{j=!0,k()}):k();function P(r,c){if(m){const d={key:y.value,oldValue:r,newValue:c,storageArea:t};m.dispatchEvent(t instanceof Storage?new StorageEvent("storage",d):new CustomEvent(J,{detail:d}))}}function x(r){try{const c=t.getItem(y.value);if(r==null)P(c,null),t.removeItem(y.value);else{const d=O.write(r);c!==d&&(t.setItem(y.value,d),P(c,d))}}catch(c){p(c)}}function G(r){const c=r?r.newValue:t.getItem(y.value);if(c==null)return u&&S!=null&&t.setItem(y.value,O.write(S)),S;if(!r&&l){const d=O.read(c);return typeof l=="function"?l(d,S):W==="object"&&!Array.isArray(d)?{...S,...d}:d}else return typeof c!="string"?c:O.read(c)}function k(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){g.value=S;return}if(!(r&&r.key!==y.value)){V();try{(r==null?void 0:r.newValue)!==O.write(g.value)&&(g.value=G(r))}catch(c){p(c)}finally{r?$(M):M()}}}}function H(r){k(r.detail)}return g}function Oe(e,n,t={}){const{window:o=N}=t;return be(e,n,o==null?void 0:o.sessionStorage,t)}function Ae(){const e=ee(),n=te(),t=Oe("routeStack",[]),o=F(""),s=A(()=>t.value.find(a=>a.path===o.value)),f=F(0),h=A(()=>f.value),i=A(()=>t.value.some(a=>a.path===e.fullPath));return C(()=>e.fullPath,a=>{e.meta.showTab?(e.meta.title&&!t.value.some(p=>p.path===a)&&t.value.push({path:a,title:e.meta.title,key:`${a}@${new Date().getTime().toString()}`}),o.value=a):o.value=""},{immediate:!0}),{routeStack:t,activeKey:o,activeStack:s,routeKey:h,isKeepAlive:i,closeTab:(a=e.fullPath)=>{if(t.value=t.value.filter(p=>p.path!==a),t.value.length>0){const p=t.value[t.value.length-1];o.value=p.path,n.push(p.path)}else n.push("/")},closeOthers:()=>{t.value=t.value.filter(a=>a.path===o.value)},refresh:()=>{t.value=t.value.map(a=>(a.path===o.value&&(a.key=`${a.path}@${new Date().getTime().toString()}`),a))},push:a=>{n.push(a)}}}export{Ae as u};
