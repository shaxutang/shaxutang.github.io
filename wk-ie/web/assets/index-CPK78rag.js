import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-BHms0YAU.js";import{u as z,a as G,b as K}from"./product-category-CfSqcCEH.js";import{F as h,_ as U,I as O}from"./index-DTvfgQe8.js";import{M as L}from"./index-DewwF9gK.js";import{d as x,a4 as A,w as Q,E as B,F as b,G as l,c as e,a5 as P,l as t,a6 as V,t as j,a2 as I,a3 as H,M as D,J as R,Z as E,O as $,a as W,a7 as S,S as Z,K as M,a9 as Y,a1 as X,H as ee}from"./index-DV7Tvt5Y.js";import{_ as te,B as w}from"./TextArea-BjtsIsZn.js";import{P as oe}from"./index-Db-an7ty.js";import{c as ae}from"./cn-C2CL3Pwu.js";import{_ as ne}from"./index-CVdO9TpD.js";import{_ as se}from"./index-Dc-Pmjbt.js";import{S as re}from"./index-D-UiK71F.js";import{C as ie}from"./index-B1ztuN38.js";import"./navs-BD3d0_6e.js";import"./index-BbVrix12.js";import"./DownOutlined-D--NuR7i.js";import"./useRequest-Dz7y7lr_.js";import"./responsiveObserve-DeVBohwv.js";import"./isPlainObject-BWkeKT7j.js";import"./Col-B8xDw5VW.js";import"./pickAttrs-BWmeWkVt.js";import"./index-eZogoHkx.js";import"./index-BHtfOZ07.js";import"./index-BCUw_SCa.js";import"./List-BmaGCUCT.js";import"./eagerComputed-BvJDvKzU.js";import"./index-_wvjrq5s.js";import"./isMobile-BbN7I0i_.js";import"./index-5hWegm85.js";import"./index-Bedhq2Ut.js";import"./LeftOutlined-Dy19BuOD.js";import"./index-CyNtAtIp.js";import"./index-Cufxhdh-.js";import"./index-BXzvATnI.js";const T=x({__name:"ModalForm",props:{title:{},open:{type:Boolean},disabled:{type:Boolean},initData:{}},emits:["update:open","submit"],setup(C,{expose:g,emit:m}){const u=C,r=m,i=A({categoryName:"",description:""});Q(()=>u.initData,o=>{o&&Object.assign(i,o)},{immediate:!0});const{validate:f,resetFields:p,validateInfos:c}=h.useForm(i,A({categoryName:[{required:!0,message:"请输入类型名称"}]})),a=()=>{f().then(()=>{r("submit",V(i))}).catch(o=>{})};return g({resetFields:p}),(o,s)=>{const d=O,_=U,n=te,k=h,y=L;return b(),B(y,{title:o.title,open:o.open,onChange:s[2]||(s[2]=v=>o.$emit("update:open",v)),onOk:a},{default:l(()=>[e(k,{disabled:o.disabled,layout:"vertical",autocomplete:"off"},{default:l(()=>[e(_,P({name:"categoryName",label:"类型名称"},t(c).categoryName),{default:l(()=>[e(d,{value:t(i).categoryName,"onUpdate:value":s[0]||(s[0]=v=>t(i).categoryName=v),placeholder:"请输入类型名称","allow-clear":""},null,8,["value"])]),_:1},16),e(_,P({name:"description",label:"描述"},t(c).contactPerson),{default:l(()=>[e(n,{value:t(i).description,"onUpdate:value":s[1]||(s[1]=v=>t(i).description=v),rows:4,placeholder:"请输入描述内容","allow-clear":""},null,8,["value"])]),_:1},16)]),_:1},8,["disabled"])]),_:1},8,["title","open"])}}}),le=x({__name:"AddModalFormButton",emits:["finish"],setup(C,{emit:g}){const m=g,u=j(!1),[r,i]=I.useMessage(),f=H("formRef"),{isFetching:p,execute:c,onFetchResponse:a}=z("post");a(async s=>{var n;const{code:d,message:_}=s;if(d!==0){r.error(_);return}m("finish"),(n=f.value)==null||n.resetFields(),u.value=!1,r.success("新增成功")});const o=s=>{c({...s})};return(s,d)=>{const _=w;return b(),D($,null,[e(_,{type:"primary",onClick:d[0]||(d[0]=n=>u.value=!0)},{icon:l(()=>[e(t(oe))]),default:l(()=>[d[2]||(d[2]=R(" 新增类型 "))]),_:1,__:[2]}),e(T,{ref_key:"formRef",ref:f,title:"新增类型",disabled:t(p),open:t(u),"onUpdate:open":d[1]||(d[1]=n=>E(u)?u.value=n:null),onSubmit:o},null,8,["disabled","open"]),e(t(i))],64)}}}),me=[{title:"ID",dataIndex:"id",key:"id"},{title:"类型名称",dataIndex:"categoryName",key:"categoryName"},{title:"描述",dataIndex:"description",key:"description"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt"},{title:"修改时间",dataIndex:"updatedAt",key:"updatedAt"},{title:"操作",key:"action"}],pe=x({__name:"UpdateModalFormButton",props:{category:{}},emits:["finish"],setup(C,{emit:g}){const m=C,u=g,r=j(!1),[i,f]=I.useMessage(),p=H("formRef"),c=W(()=>({categoryName:m.category.categoryName,description:m.category.description})),{isFetching:a,execute:o,onFetchResponse:s}=z("put");s(async _=>{var y;const{code:n,message:k}=_;if(n!==0){i.error(k);return}u("finish"),(y=p.value)==null||y.resetFields(),r.value=!1,i.success("修改成功")});const d=_=>{o({id:m.category.id,..._})};return(_,n)=>{const k=w;return b(),D($,null,[e(k,{type:"link",onClick:n[0]||(n[0]=y=>r.value=!0)},{default:l(()=>n[2]||(n[2]=[R(" 编辑 ")])),_:1,__:[2]}),e(T,{ref_key:"formRef",ref:p,title:"修改类型","init-data":t(c),disabled:t(a),open:t(r),"onUpdate:open":n[1]||(n[1]=y=>E(r)?r.value=y:null),onSubmit:d},null,8,["init-data","disabled","open"]),e(t(f))],64)}}}),ue={key:1},ce={key:2},de=x({__name:"List",props:{loading:{type:Boolean},pageData:{}},emits:["pageChange","delete","updated"],setup(C,{emit:g}){const m=g,{execute:u,onFetchResponse:r}=G(),[i,f]=I.useMessage(),p=a=>{m("pageChange",a)};r(async a=>{const{code:o,message:s}=a;if(o!==0){i.error(s);return}m("delete"),i.success("删除成功")});const c=a=>{u(a)};return(a,o)=>{var n,k,y,v;const s=w,d=ne,_=se;return b(),D($,null,[e(_,{size:"small",columns:t(me),"data-source":(n=a.pageData)==null?void 0:n.records,loading:a.loading,"row-key":"id",pagination:{current:(k=a.pageData)==null?void 0:k.current,pageSize:(y=a.pageData)==null?void 0:y.size,total:(v=a.pageData)==null?void 0:v.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:F=>`共 ${F} 条`,pageSizeOptions:["10","20","30","40"]},onChange:p},{bodyCell:l(({column:F,record:N})=>[F.key==="description"?(b(),D("span",{key:0,class:Z(t(ae)({"text-black/60":!N.description}))},M(N.description??"-暂无描述-"),3)):S("",!0),F.key==="createdAt"?(b(),D("span",ue,M(t(Y)(N.createdAt).format("YYYY/MM/DD HH:mm:ss")),1)):S("",!0),F.key==="updatedAt"?(b(),D("span",ce,M(t(Y)(N.updatedAt).format("YYYY/MM/DD HH:mm:ss")),1)):S("",!0),F.key==="action"?(b(),D($,{key:3},[e(pe,{category:N,onFinish:o[0]||(o[0]=J=>a.$emit("updated"))},null,8,["category"]),e(d,{title:"确认要删除该类型吗?","ok-text":"Yes","cancel-text":"No",onConfirm:J=>c(N.id)},{default:l(()=>[e(s,{type:"link",danger:""},{default:l(()=>o[1]||(o[1]=[R("删除")])),_:1,__:[1]})]),_:2},1032,["onConfirm"])],64)):S("",!0)]),_:1},8,["columns","data-source","loading","pagination"]),e(t(f))],64)}}}),_e=x({__name:"Search",emits:["submit","reset"],setup(C,{emit:g}){const m=g,u=H("formRef"),r=A({categoryName:""}),i=()=>{m("submit",V(r))},f=()=>{var p;(p=u.value)==null||p.resetFields()};return(p,c)=>{const a=O,o=U,s=w,d=re,_=h;return b(),B(_,{ref_key:"formRef",ref:u,model:t(r),autocomplete:"off",layout:"inline"},{default:l(()=>[e(o,{name:"categoryName",label:"类型名称"},{default:l(()=>[e(a,{placeholder:"请输入类型名称",value:t(r).categoryName,"onUpdate:value":c[0]||(c[0]=n=>t(r).categoryName=n),"allow-clear":""},null,8,["value"])]),_:1}),e(o,null,{default:l(()=>[e(d,null,{default:l(()=>[e(s,{"html-type":"submit",type:"primary",onClick:i},{default:l(()=>c[1]||(c[1]=[R("查询")])),_:1,__:[1]}),e(s,{onClick:f},{default:l(()=>c[2]||(c[2]=[R("重置")])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["model"])}}}),fe={class:"flex items-center justify-between"},Le=x({__name:"index",setup(C){X({title:"IE WorkSpace | 产品分类"});const{data:g,execute:m,isFetching:u}=K(),r=({categoryName:p})=>{m({categoryName:p})},i=p=>{m({current:p.current,size:p.pageSize})},f=()=>{m()};return(p,c)=>{const a=ie,o=q;return b(),B(o,null,{default:l(()=>[e(a,{class:"!mb-6"},{default:l(()=>[ee("div",fe,[e(_e,{onSubmit:r}),e(le,{onFinish:t(m)},null,8,["onFinish"])])]),_:1}),e(a,null,{default:l(()=>[e(de,{loading:t(u),pageData:t(g),onPageChange:i,onDelete:f,onUpdated:t(m)},null,8,["loading","pageData","onUpdated"])]),_:1})]),_:1})}}});export{Le as default};
