import{c as P,I as ce,s as $,v as re,d as Q,C as se,o as he,aP as pe,e as w,u as de,t as S,a as b,f as me,_ as K,ae as G,x as ie,ak as j,P as ee,am as k,B as C,D as J,w as R,ba as be,n as Ke}from"./index-CtZFkp4p.js";import{B as xe,n as ge,i as ue,w as ke,o as Oe,f as Ee}from"./TextArea-Cs30zvrZ.js";import{e as Pe,T as Ne,r as we,t as Se,f as te,h as De,c as _e,i as Ce,F as Te,V as Fe}from"./index-Cxmr1eSz.js";import{d as Ae}from"./index-BOfr_Bk3.js";var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function ne(e){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),n.forEach(function(l){je(e,l,o[l])})}return e}function je(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}var X=function(a,o){var n=ne({},a,o.attrs);return P(ce,ne({},n,{icon:Ie}),null)};X.displayName="FolderOpenOutlined";X.inheritAttrs=!1;var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function le(e){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),n.forEach(function(l){Be(e,l,o[l])})}return e}function Be(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}var Y=function(a,o){var n=le({},a,o.attrs);return P(ce,le({},n,{icon:$e}),null)};Y.displayName="FolderOutlined";Y.inheritAttrs=!1;const He=()=>{const e=$(!1);return re(()=>{e.value=!0}),e},Le={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:se(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function ae(e){return!!(e&&e.then)}const Qe=Q({compatConfig:{MODE:3},name:"ActionButton",props:Le,setup(e,a){let{slots:o}=a;const n=$(!1),l=$(),u=$(!1);let d;const i=He();he(()=>{e.autofocus&&(d=setTimeout(()=>{var r,v;return(v=(r=pe(l.value))===null||r===void 0?void 0:r.focus)===null||v===void 0?void 0:v.call(r)}))}),re(()=>{clearTimeout(d)});const f=function(){for(var r,v=arguments.length,h=new Array(v),E=0;E<v;E++)h[E]=arguments[E];(r=e.close)===null||r===void 0||r.call(e,...h)},y=r=>{ae(r)&&(u.value=!0,r.then(function(){i.value||(u.value=!1),f(...arguments),n.value=!1},v=>(i.value||(u.value=!1),n.value=!1,Promise.reject(v))))},O=r=>{const{actionFn:v}=e;if(n.value)return;if(n.value=!0,!v){f();return}let h;if(e.emitEvent){if(h=v(r),e.quitOnNullishReturnValue&&!ae(h)){n.value=!1,f(r);return}}else if(v.length)h=v(e.close),n.value=!1;else if(h=v(),!h){f();return}y(h)};return()=>{const{type:r,prefixCls:v,buttonProps:h}=e;return P(xe,w(w(w({},ge(r)),{},{onClick:O,loading:u.value,prefixCls:v},h),{},{ref:l}),o)}}}),oe=4;function Ve(e){const{dropPosition:a,dropLevelOffset:o,prefixCls:n,indent:l,direction:u="ltr"}=e,d=u==="ltr"?"left":"right",i=u==="ltr"?"right":"left",f={[d]:`${-o*l+oe}px`,[i]:0};switch(a){case-1:f.top="-3px";break;case 1:f.bottom="-3px";break;default:f.bottom="-3px",f[d]=`${l+oe}px`;break}return P("div",{style:f,class:`${n}-drop-indicator`},null)}const fe=()=>{const e=Se();return K(K({},e),{showLine:J([Boolean,Object]),multiple:k(),autoExpandParent:k(),checkStrictly:k(),checkable:k(),disabled:k(),defaultExpandAll:k(),defaultExpandParent:k(),defaultExpandedKeys:C(),expandedKeys:C(),checkedKeys:J([Array,Object]),defaultCheckedKeys:C(),selectedKeys:C(),defaultSelectedKeys:C(),selectable:k(),loadedKeys:C(),draggable:k(),showIcon:k(),icon:j(),switcherIcon:ee.any,prefixCls:String,replaceFields:se(),blockNode:k(),openAnimation:ee.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":j(),"onUpdate:checkedKeys":j(),"onUpdate:expandedKeys":j()})},B=Q({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:ue(fe(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:Object,setup(e,a){let{attrs:o,expose:n,emit:l,slots:u}=a;ke(!(e.treeData===void 0&&u.default));const{prefixCls:d,direction:i,virtual:f}=de("tree",e),[y,O]=Pe(d),r=S();n({treeRef:r,onNodeExpand:function(){var c;(c=r.value)===null||c===void 0||c.onNodeExpand(...arguments)},scrollTo:c=>{var p;(p=r.value)===null||p===void 0||p.scrollTo(c)},selectedKeys:b(()=>{var c;return(c=r.value)===null||c===void 0?void 0:c.selectedKeys}),checkedKeys:b(()=>{var c;return(c=r.value)===null||c===void 0?void 0:c.checkedKeys}),halfCheckedKeys:b(()=>{var c;return(c=r.value)===null||c===void 0?void 0:c.halfCheckedKeys}),loadedKeys:b(()=>{var c;return(c=r.value)===null||c===void 0?void 0:c.loadedKeys}),loadingKeys:b(()=>{var c;return(c=r.value)===null||c===void 0?void 0:c.loadingKeys}),expandedKeys:b(()=>{var c;return(c=r.value)===null||c===void 0?void 0:c.expandedKeys})}),me(()=>{Ee(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});const h=(c,p)=>{l("update:checkedKeys",c),l("check",c,p)},E=(c,p)=>{l("update:expandedKeys",c),l("expand",c,p)},D=(c,p)=>{l("update:selectedKeys",c),l("select",c,p)};return()=>{const{showIcon:c,showLine:p,switcherIcon:H=u.switcherIcon,icon:L=u.icon,blockNode:V,checkable:M,selectable:A,fieldNames:T=e.replaceFields,motion:U=e.openAnimation,itemHeight:t=28,onDoubleclick:s,onDblclick:m}=e,F=K(K(K({},o),Oe(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{showLine:!!p,dropIndicatorRender:Ve,fieldNames:T,icon:L,itemHeight:t}),x=u.default?G(u.default()):void 0;return y(P(Ne,w(w({},F),{},{virtual:f.value,motion:U,ref:r,prefixCls:d.value,class:ie({[`${d.value}-icon-hide`]:!c,[`${d.value}-block-node`]:V,[`${d.value}-unselectable`]:!A,[`${d.value}-rtl`]:i.value==="rtl"},o.class,O.value),direction:i.value,checkable:M,selectable:A,switcherIcon:_=>we(d.value,H,_,u.leafIcon,p),onCheck:h,onExpand:E,onSelect:D,onDblclick:m||s,children:x}),K(K({},u),{checkable:()=>P("span",{class:`${d.value}-checkbox-inner`},null)})))}}});var N;(function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"})(N||(N={}));function Z(e,a,o){function n(l){const u=l[a.key],d=l[a.children];o(u,l)!==!1&&Z(d||[],a,o)}e.forEach(n)}function Me(e){let{treeData:a,expandedKeys:o,startKey:n,endKey:l,fieldNames:u={title:"title",key:"key",children:"children"}}=e;const d=[];let i=N.None;if(n&&n===l)return[n];if(!n||!l)return[];function f(y){return y===n||y===l}return Z(a,u,y=>{if(i===N.End)return!1;if(f(y)){if(d.push(y),i===N.None)i=N.Start;else if(i===N.Start)return i=N.End,!1}else i===N.Start&&d.push(y);return o.includes(y)}),d}function z(e,a,o){const n=[...a],l=[];return Z(e,o,(u,d)=>{const i=n.indexOf(u);return i!==-1&&(l.push(d),n.splice(i,1)),!!n.length}),l}var Ue=function(e,a){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)a.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]]);return o};const Re=()=>K(K({},fe()),{expandAction:J([Boolean,String])});function ze(e){const{isLeaf:a,expanded:o}=e;return a?P(Te,null,null):o?P(X,null,null):P(Y,null,null)}const q=Q({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:ue(Re(),{showIcon:!0,expandAction:"click"}),slots:Object,setup(e,a){let{attrs:o,slots:n,emit:l,expose:u}=a;var d;const i=S(e.treeData||te(G((d=n.default)===null||d===void 0?void 0:d.call(n))));R(()=>e.treeData,()=>{i.value=e.treeData}),be(()=>{Ke(()=>{var t;e.treeData===void 0&&n.default&&(i.value=te(G((t=n.default)===null||t===void 0?void 0:t.call(n))))})});const f=S(),y=S(),O=b(()=>De(e.fieldNames)),r=S();u({scrollTo:t=>{var s;(s=r.value)===null||s===void 0||s.scrollTo(t)},selectedKeys:b(()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.selectedKeys}),checkedKeys:b(()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.checkedKeys}),halfCheckedKeys:b(()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.halfCheckedKeys}),loadedKeys:b(()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.loadedKeys}),loadingKeys:b(()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.loadingKeys}),expandedKeys:b(()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.expandedKeys})});const h=()=>{const{keyEntities:t}=_e(i.value,{fieldNames:O.value});let s;return e.defaultExpandAll?s=Object.keys(t):e.defaultExpandParent?s=Ce(e.expandedKeys||e.defaultExpandedKeys||[],t):s=e.expandedKeys||e.defaultExpandedKeys,s},E=S(e.selectedKeys||e.defaultSelectedKeys||[]),D=S(h());R(()=>e.selectedKeys,()=>{e.selectedKeys!==void 0&&(E.value=e.selectedKeys)},{immediate:!0}),R(()=>e.expandedKeys,()=>{e.expandedKeys!==void 0&&(D.value=e.expandedKeys)},{immediate:!0});const p=Ae((t,s)=>{const{isLeaf:m}=s;m||t.shiftKey||t.metaKey||t.ctrlKey||r.value.onNodeExpand(t,s)},200,{leading:!0}),H=(t,s)=>{e.expandedKeys===void 0&&(D.value=t),l("update:expandedKeys",t),l("expand",t,s)},L=(t,s)=>{const{expandAction:m}=e;m==="click"&&p(t,s),l("click",t,s)},V=(t,s)=>{const{expandAction:m}=e;(m==="dblclick"||m==="doubleclick")&&p(t,s),l("doubleclick",t,s),l("dblclick",t,s)},M=(t,s)=>{const{multiple:m}=e,{node:F,nativeEvent:x}=s,_=F[O.value.key],I=K(K({},s),{selected:!0}),ve=(x==null?void 0:x.ctrlKey)||(x==null?void 0:x.metaKey),ye=x==null?void 0:x.shiftKey;let g;m&&ve?(g=t,f.value=_,y.value=g,I.selectedNodes=z(i.value,g,O.value)):m&&ye?(g=Array.from(new Set([...y.value||[],...Me({treeData:i.value,expandedKeys:D.value,startKey:_,endKey:f.value,fieldNames:O.value})])),I.selectedNodes=z(i.value,g,O.value)):(g=[_],f.value=_,y.value=g,I.selectedNodes=z(i.value,g,O.value)),l("update:selectedKeys",g),l("select",g,I),e.selectedKeys===void 0&&(E.value=g)},A=(t,s)=>{l("update:checkedKeys",t),l("check",t,s)},{prefixCls:T,direction:U}=de("tree",e);return()=>{const t=ie(`${T.value}-directory`,{[`${T.value}-directory-rtl`]:U.value==="rtl"},o.class),{icon:s=n.icon,blockNode:m=!0}=e,F=Ue(e,["icon","blockNode"]);return P(B,w(w(w({},o),{},{icon:s||ze,ref:r,blockNode:m},F),{},{prefixCls:T.value,class:t,expandedKeys:D.value,selectedKeys:E.value,onSelect:M,onClick:L,onDblclick:V,onExpand:H,onCheck:A}),n)}}}),W=Fe,Xe=K(B,{DirectoryTree:q,TreeNode:W,install:e=>(e.component(B.name,B),e.component(W.name,W),e.component(q.name,q),e)});export{Qe as A,Xe as _};
