import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-HXixYu0j.js";import{a as H,b as G,c as K}from"./equipment-supplier-D-xeEh6G.js";import{F as w,_ as Y,I as z}from"./index-BOfr_Bk3.js";import{M as L}from"./index-BqVwmiBa.js";import{d as x,a4 as $,w as Q,E as M,F as y,G as i,c as e,a5 as S,l as t,a6 as O,t as q,a2 as A,a3 as I,M as b,J as D,Z as V,O as C,a as W,a7 as N,K as E,a9 as U,a1 as Z,H as X}from"./index-CtZFkp4p.js";import{P as ee}from"./index-CTzm4KRz.js";import{B as R}from"./TextArea-Cs30zvrZ.js";import{_ as te}from"./index-CbPuKKq1.js";import{_ as oe}from"./index-CxjYXKV3.js";import{S as ae}from"./index-B_brma43.js";import{C as ne}from"./index-B2DcCLpg.js";import"./navs-CfyB2w-a.js";import"./index-CYrzOZGV.js";import"./DownOutlined-D4s7AB3s.js";import"./useRequest-bvdcAKX1.js";import"./responsiveObserve-BR2lwN30.js";import"./isPlainObject-ByKZJB2G.js";import"./Col-CK3YAQNr.js";import"./pickAttrs-BsI7RF8R.js";import"./index-cGiLByTK.js";import"./index-BA3hHyBm.js";import"./index-Cxmr1eSz.js";import"./List-UuYAzSWU.js";import"./eagerComputed-CVs6PNRb.js";import"./index-CoGlqIll.js";import"./isMobile-BbN7I0i_.js";import"./index-LeozGhtr.js";import"./index-BGqO3MUF.js";import"./LeftOutlined-e3FWgSxt.js";import"./index-KCGl6bU8.js";import"./index-TlC6eTBq.js";import"./index-Bov8DSqh.js";const j=x({__name:"ModalForm",props:{title:{},open:{type:Boolean},disabled:{type:Boolean},initData:{}},emits:["update:open","submit"],setup(F,{expose:k,emit:p}){const f=F,r=p,n=$({supplierName:"",contactPerson:"",contactEmail:"",contactPhone:""});Q(()=>f.initData,o=>{o&&Object.assign(n,o)},{immediate:!0});const{validate:g,resetFields:u,validateInfos:c}=w.useForm(n,$({supplierName:[{required:!0,message:"请输入供应商名称"}]})),s=()=>{g().then(()=>{r("submit",O(n))}).catch(o=>{})};return k({resetFields:u}),(o,a)=>{const m=z,_=Y,l=w,P=L;return y(),M(P,{title:o.title,open:o.open,onChange:a[4]||(a[4]=d=>o.$emit("update:open",d)),onOk:s},{default:i(()=>[e(l,{disabled:o.disabled,layout:"vertical",autocomplete:"off"},{default:i(()=>[e(_,S({name:"supplierName",label:"供应商名称"},t(c).supplierName),{default:i(()=>[e(m,{value:t(n).supplierName,"onUpdate:value":a[0]||(a[0]=d=>t(n).supplierName=d),placeholder:"请输入供应商名称","allow-clear":""},null,8,["value"])]),_:1},16),e(_,S({name:"contactPerson",label:"联系人"},t(c).contactPerson),{default:i(()=>[e(m,{value:t(n).contactPerson,"onUpdate:value":a[1]||(a[1]=d=>t(n).contactPerson=d),placeholder:"请输入联系人","allow-clear":""},null,8,["value"])]),_:1},16),e(_,S({name:"contactEmail",label:"联系人邮箱"},t(c).contactEmail),{default:i(()=>[e(m,{value:t(n).contactEmail,"onUpdate:value":a[2]||(a[2]=d=>t(n).contactEmail=d),placeholder:"请输入联系人邮箱","allow-clear":""},null,8,["value"])]),_:1},16),e(_,S({name:"contactPhone",label:"联系人电话"},t(c).contactPhone),{default:i(()=>[e(m,{value:t(n).contactPhone,"onUpdate:value":a[3]||(a[3]=d=>t(n).contactPhone=d),placeholder:"请输入联系人电话","allow-clear":""},null,8,["value"])]),_:1},16)]),_:1},8,["disabled"])]),_:1},8,["title","open"])}}}),se=x({__name:"AddModalFormButton",emits:["finish"],setup(F,{emit:k}){const p=k,f=q(!1),[r,n]=A.useMessage(),g=I("formRef"),{isFetching:u,execute:c,onFetchResponse:s}=H("post");s(async a=>{var l;const{code:m,message:_}=a;if(m!==0){r.error(_);return}p("finish"),(l=g.value)==null||l.resetFields(),f.value=!1,r.success("新增成功")});const o=a=>{c({...a})};return(a,m)=>{const _=R;return y(),b(C,null,[e(_,{type:"primary",onClick:m[0]||(m[0]=l=>f.value=!0)},{icon:i(()=>[e(t(ee))]),default:i(()=>[m[2]||(m[2]=D(" 新增供应商 "))]),_:1,__:[2]}),e(j,{ref_key:"formRef",ref:g,title:"新增供应商",disabled:t(u),open:t(f),"onUpdate:open":m[1]||(m[1]=l=>V(f)?f.value=l:null),onSubmit:o},null,8,["disabled","open"]),e(t(n))],64)}}}),le=[{title:"ID",dataIndex:"id",key:"id"},{title:"供应商名称",dataIndex:"supplierName",key:"supplierName"},{title:"联系人",dataIndex:"contactPerson",key:"contactPerson"},{title:"联系人邮箱",dataIndex:"contactEmail",key:"contactEmail"},{title:"联系人电话",dataIndex:"contactPhone",key:"contactPhone"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt"},{title:"修改时间",dataIndex:"updatedAt",key:"updatedAt"},{title:"操作",key:"action"}],ie=x({__name:"UpdateModalFormButton",props:{supplier:{}},emits:["finish"],setup(F,{emit:k}){const p=F,f=k,r=q(!1),[n,g]=A.useMessage(),u=I("formRef"),c=W(()=>({supplierName:p.supplier.supplierName,contactPerson:p.supplier.contactPerson,contactEmail:p.supplier.contactEmail,contactPhone:p.supplier.contactPhone})),{isFetching:s,execute:o,onFetchResponse:a}=H("put");a(async _=>{var d;const{code:l,message:P}=_;if(l!==0){n.error(P);return}f("finish"),(d=u.value)==null||d.resetFields(),r.value=!1,n.success("修改成功")});const m=_=>{o({id:p.supplier.id,..._})};return(_,l)=>{const P=R;return y(),b(C,null,[e(P,{type:"link",onClick:l[0]||(l[0]=d=>r.value=!0)},{default:i(()=>l[2]||(l[2]=[D(" 编辑 ")])),_:1,__:[2]}),e(j,{ref_key:"formRef",ref:u,title:"修改供应商","init-data":t(c),disabled:t(s),open:t(r),"onUpdate:open":l[1]||(l[1]=d=>V(r)?r.value=d:null),onSubmit:m},null,8,["init-data","disabled","open"]),e(t(g))],64)}}}),pe={key:3},re={key:4},me=x({__name:"List",props:{loading:{type:Boolean},pageData:{}},emits:["pageChange","delete","updated"],setup(F,{emit:k}){const p=k,{execute:f,onFetchResponse:r}=G(),[n,g]=A.useMessage(),u=s=>{p("pageChange",s)};r(async s=>{const{code:o,message:a}=s;if(o!==0){n.error(a);return}p("delete"),n.success("删除成功")});const c=s=>{f(s)};return(s,o)=>{var l,P,d,B;const a=R,m=te,_=oe;return y(),b(C,null,[e(_,{size:"small",columns:t(le),"data-source":(l=s.pageData)==null?void 0:l.records,loading:s.loading,"row-key":"id",pagination:{current:(P=s.pageData)==null?void 0:P.current,pageSize:(d=s.pageData)==null?void 0:d.size,total:(B=s.pageData)==null?void 0:B.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:h=>`共 ${h} 条`,pageSizeOptions:["10","20","30","40"]},onChange:u},{bodyCell:i(({column:h,record:v})=>[h.key==="contactPerson"?(y(),b(C,{key:0},[D(E(v.contactPerson?v.contactPerson:"暂无信息"),1)],64)):N("",!0),h.key==="contactEmail"?(y(),b(C,{key:1},[D(E(v.contactEmail?v.contactEmail:"暂无信息"),1)],64)):N("",!0),h.key==="contactPhone"?(y(),b(C,{key:2},[D(E(v.contactPhone?v.contactPhone:"暂无信息"),1)],64)):N("",!0),h.key==="createdAt"?(y(),b("span",pe,E(t(U)(v.createdAt).format("YYYY/MM/DD HH:mm:ss")),1)):N("",!0),h.key==="updatedAt"?(y(),b("span",re,E(t(U)(v.updatedAt).format("YYYY/MM/DD HH:mm:ss")),1)):N("",!0),h.key==="action"?(y(),b(C,{key:5},[e(ie,{supplier:v,onFinish:o[0]||(o[0]=T=>s.$emit("updated"))},null,8,["supplier"]),e(m,{title:"确认要删除该类型吗?","ok-text":"Yes","cancel-text":"No",onConfirm:T=>c(v.id)},{default:i(()=>[e(a,{type:"link",danger:""},{default:i(()=>o[1]||(o[1]=[D("删除")])),_:1,__:[1]})]),_:2},1032,["onConfirm"])],64)):N("",!0)]),_:1},8,["columns","data-source","loading","pagination"]),e(t(g))],64)}}}),ue=x({__name:"Search",emits:["submit","reset"],setup(F,{emit:k}){const p=k,f=I("formRef"),r=$({supplierName:""}),n=()=>{p("submit",O(r))},g=()=>{var u;(u=f.value)==null||u.resetFields()};return(u,c)=>{const s=z,o=Y,a=R,m=ae,_=w;return y(),M(_,{ref_key:"formRef",ref:f,model:t(r),autocomplete:"off",layout:"inline"},{default:i(()=>[e(o,{name:"supplierName",label:"供应商名称"},{default:i(()=>[e(s,{placeholder:"请输入供应商名称",value:t(r).supplierName,"onUpdate:value":c[0]||(c[0]=l=>t(r).supplierName=l),"allow-clear":""},null,8,["value"])]),_:1}),e(o,null,{default:i(()=>[e(m,null,{default:i(()=>[e(a,{type:"primary",onClick:n},{default:i(()=>c[1]||(c[1]=[D("查询")])),_:1,__:[1]}),e(a,{onClick:g},{default:i(()=>c[2]||(c[2]=[D("重置")])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["model"])}}}),ce={class:"flex items-center justify-between"},Te=x({__name:"index",setup(F){Z({title:"IE WorkSpace | 设备供应商"});const{data:k,execute:p,isFetching:f}=K(),r=({supplierName:u})=>{p({supplierName:u})},n=u=>{p({current:u.current,size:u.pageSize})},g=()=>{p()};return(u,c)=>{const s=ne,o=J;return y(),M(o,null,{default:i(()=>[e(s,{class:"!mb-6"},{default:i(()=>[X("div",ce,[e(ue,{onSubmit:r}),e(se,{onFinish:t(p)},null,8,["onFinish"])])]),_:1}),e(s,null,{default:i(()=>[e(me,{loading:t(f),pageData:t(k),onPageChange:n,onDelete:g,onUpdated:t(p)},null,8,["loading","pageData","onUpdated"])]),_:1})]),_:1})}}});export{Te as default};
